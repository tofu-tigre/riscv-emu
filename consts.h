//
// Created by jq on 2/14/2023.
//

#ifndef RISCV_EMU_CONSTS_H
#define RISCV_EMU_CONSTS_H

#include <cstdint>
#include <stdint.h>
#include <stddef.h>

enum ALU_Mode {
    ADD,
    SUB,
    SLL,
    SLT,
    SLTU,
    XOR,
    SRL,
    SRA,
    OR,
    AND,
    B
};

enum MemRW {
    READ,
    WRITE,
};

enum WBSelect {
    ALU_SEL,
    MEM_SEL,
    PC_PLUS_4
};

enum PCSel {
    ALU_PC_SEL,
    PC_INCR
};

enum MemMode {
    BYTE,
    HALF_WORD,
    WORD,
    BYTE_UPPER,
    HALF_WORD_UPPER
};

enum CacheByteSelect {
    CACHE_SEL_BYTE,
    CACHE_SEL_HALF_WORD,
    CACHE_SEL_WORD,
    CACHE_SEL_HALF_WORD_UPPER,
    CACHE_SEL_BYTE_UPPER
};
enum ImmType {
    IMM_I_TYPE,
    IMM_S_TYPE,
    IMM_B_TYPE,
    IMM_J_TYPE,
    IMM_U_TYPE
};

enum BranchCompType {
    EQUAL,
    LESS_THAN
};

namespace Constants {
    const uint32_t BOOT_ADDR = 0x400;
    const uint32_t DATA_ADDR = 0x800;
    const size_t d = 2;
    const size_t DRAM_SIZE = 0x1FFFF; // 4 Kilobytes
    const uint32_t BUBBLE = 0x00000033;
    const uint32_t EXIT_CODE = 0xff;

    const uint32_t TAG_MASK =    0b11111111111111111110000000000000;
    const int TAG_SHIFT = 13;
    const uint32_t INDEX_MASK =  0b00000000000000000001111111111000;
    const int INDEX_SHIFT = 3;
    const uint32_t OFFSET_MASK = 0b00000000000000000000000000000111;

    const uint32_t OPCODE_MASK = 0b00000000000000000000000001111111;
    const uint32_t R_INSTR =     0b00000000000000000000000000110011;
    const uint32_t I_INSTR =     0b00000000000000000000000000010011;
    const uint32_t I_LOAD_INSTR =0b00000000000000000000000000000011;
    const uint32_t I_JALR_INSTR =0b00000000000000000000000001100111;
    const uint32_t S_INSTR =     0b00000000000000000000000000100011;
    const uint32_t B_INSTR =     0b00000000000000000000000001100011;
    const uint32_t U_LUI_INSTR = 0b00000000000000000000000000110111;
    const uint32_t U_AUIPC_INSTR=0b00000000000000000000000000010111;
    const uint32_t J_INSTR =     0b00000000000000000000000001101111;

    const uint32_t FUNC_7_MASK = 0b11111110000000000000000000000000;
    const uint32_t FUNC_7_SHIFT = 25;
    const uint32_t FUNC_3_MASK = 0b00000000000000000111000000000000;
    const uint32_t FUNC_3_SHIFT = 12;
    const uint32_t RS1_MASK =    0b00000000000011111000000000000000;
    const uint32_t RS1_SHIFT = 15;
    const uint32_t RS2_MASK =    0b00000001111100000000000000000000;
    const uint32_t RS2_SHIFT = 20;
    const uint32_t RD_MASK =     0b00000000000000000000111110000000;
    const uint32_t RD_SHIFT = 7;

    const uint32_t I_IMM_MASK =  0b11111111111100000000000000000000;
    const uint32_t I_IMM_11_MASK = 0b10000000000000000000000000000000;
    const uint32_t I_IMM_11_SHIFT = 31;
    const uint32_t I_IMM_SIGN_EXTEND = 0b11111111111111111111100000000000;
    const uint32_t I_IMM_SHIFT = 20;

    const uint32_t S_IMM_MASK =  0b11111110000000000000111110000000;
    const uint32_t S_IMM_0_TO_4_SHIFT = 7;
    const uint32_t S_IMM_5_TO_11_SHIFT = 25;

    const uint32_t B_IMM_MASK =  0b11111110000000000000111110000000;
    const uint32_t B_IMM_SIGN_EXTEND = 0b11111111111111111111000000000000;
    const uint32_t B_IMM_1_TO_4_MASK = 0b00000000000000000000111100000000;
    const uint32_t B_IMM_1_TO_4_SHIFT = 8;
    const uint32_t B_IMM_11_SHIFT = 7;
    const uint32_t B_IMM_11_MASK = 0b10000000000000000000000010000000;
    const uint32_t B_IMM_5_TO_10_SHIFT = 25;
    const uint32_t B_IMM_5_TO_10_MASK = 0b01111110000000000000000000000000;
    const uint32_t B_IMM_12_SHIFT = 31;

    const uint32_t U_IMM_MASK =         0b11111111111111111111000000000000;
    const uint32_t J_IMM_MASK =         0b11111111111111111111000000000000;
    const uint32_t J_IMM_SIGN_EXTEND = 0b11111111111100000000000000000000;
    const uint32_t J_IMM_1_TO_10_MASK = 0b01111111111000000000000000000000;
    const uint32_t J_IMM_1_TO_10_SHIFT = 21;
    const uint32_t J_IMM_20_MASK =      0b10000000000000000000000000000000;
    const uint32_t J_IMM_20_SHIFT = 31;
    const uint32_t J_IMM_11_MASK =      0b00000000000100000000000000000000;
    const uint32_t J_IMM_11_SHIFT = 20;
    const uint32_t J_IMM_12_TO_19_MASK =0b00000000000011111111000000000000;
    const uint32_t J_IMM_12_TO_19_SHIFT = 12;

}

#endif //RISCV_EMU_CONSTS_H
